<!DOCTYPE html>
<html>

<head>
  <title>Range Slider App</title>
  <style>
    .slider {
      width: 100%;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .slider label {
      min-width: 120px;
    }

    .slider input[type="range"] {
      width: 200px;
    }

    .input-field {
      width: 60px;
    }
  </style>
</head>

<body>
  <h1>Range Slider App</h1>

  <div class="slider">
    <label for="cadence-slider">步頻 (Cadence):</label>
    <input type="range" id="cadence-slider" min="140" max="230" step="1" value="140">
    <input type="number" id="cadence-input" class="input-field" min="140" max="230" step="1" value="140">
    <span id="cadence-value"></span> steps/min
  </div>

  <div class="slider">
    <label for="stride-slider">步幅 (Stride):</label>
    <input type="range" id="stride-slider" min="0.1" max="2.0" step="0.01" value="0.1">
    <input type="number" id="stride-input" class="input-field" min="0.1" max="2.0" step="0.01" value="0.1">
    <span id="stride-value"></span> m
  </div>

  <div class="slider">
    <label for="pace-slider">配速 (Pace):</label>
    <input type="range" id="pace-slider" min="1" max="10" step="0.001" value="10">
    <input type="number" id="pace-input" class="input-field" min="1" max="10" step="0.001" value="10">
    <span id="pace-value"></span> min/km
  </div>

  <script>
    // Function to calculate pace
    function calculatePace(cadence, stride) {
      const distancePerMinute = cadence * stride;
      const pace = 1000 / distancePerMinute;
      return pace;
    }

    // Function to calculate step frequency from pace and step length
    function calculateCadence(pace, stride) {
      const speedKmPerMinute = 1 / pace;
      const distancePerMinute = speedKmPerMinute * 1000;
      const stepFrequency = distancePerMinute / stride;
      return stepFrequency;
    }

    // Function to format pace
    function formatPace(pace) {
      const minutes = Math.floor(pace);
      const seconds = Math.round((pace - minutes) * 60);
      return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    const cadenceSlider = document.getElementById('cadence-slider');
    const cadenceInput = document.getElementById('cadence-input');
    const cadenceValue = document.getElementById('cadence-value');

    const strideSlider = document.getElementById('stride-slider');
    const strideInput = document.getElementById('stride-input');
    const strideValue = document.getElementById('stride-value');

    const paceSlider = document.getElementById('pace-slider');
    const paceInput = document.getElementById('pace-input');
    const paceValue = document.getElementById('pace-value');

    // Update UI when slider or input is adjusted
    function updatePaceAndCadence() {
      const cadence = parseFloat(cadenceSlider.value);
      const stride = parseFloat(strideSlider.value);
      const pace = calculatePace(cadence, stride);

      paceSlider.value = pace.toFixed(3);
      paceInput.value = pace.toFixed(3);
      paceValue.textContent = formatPace(pace);
      cadenceValue.textContent = cadence;
      strideValue.textContent = stride.toFixed(2);
    }

    function updateCadenceFromPace() {
      const pace = parseFloat(paceSlider.value);
      const stride = parseFloat(strideSlider.value);
      const cadence = Math.ceil(calculateCadence(pace, stride));

      cadenceSlider.value = cadence.toFixed(0);
      cadenceInput.value = cadence.toFixed(0);
      cadenceValue.textContent = cadence.toFixed(0);
      paceValue.textContent = formatPace(pace);
    }

    // Sync slider with input field and update values
    cadenceSlider.addEventListener('input', () => {
      cadenceInput.value = cadenceSlider.value;
      updatePaceAndCadence();
    });

    cadenceInput.addEventListener('input', () => {
      cadenceSlider.value = cadenceInput.value;
      updatePaceAndCadence();
    });

    strideSlider.addEventListener('input', () => {
      strideInput.value = strideSlider.value;
      updatePaceAndCadence();
    });

    strideInput.addEventListener('input', () => {
      strideSlider.value = strideInput.value;
      updatePaceAndCadence();
    });

    paceSlider.addEventListener('input', () => {
      paceInput.value = paceSlider.value;
      updateCadenceFromPace();
    });

    paceInput.addEventListener('input', () => {
      paceSlider.value = paceInput.value;
      updateCadenceFromPace();
    });

    // Initial update to set values
    updatePaceAndCadence();
  </script>
</body>

</html>